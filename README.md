# MediaOverload: è‡ªå‹•åŒ–å…§å®¹ç”Ÿæˆèˆ‡ç¤¾ç¾¤åª’é«”ç™¼å¸ƒç³»çµ±

MediaOverload æ˜¯ä¸€å€‹è‡ªå‹•åŒ–çš„å…§å®¹å‰µä½œå’Œç¤¾ç¾¤åª’é«”ç™¼å¸ƒç³»çµ±ã€‚å®ƒèƒ½å¤ æ ¹æ“šæŒ‡å®šçš„è§’è‰² (character) å’Œæç¤º (prompt)ï¼Œåˆ©ç”¨å¤§å‹èªè¨€æ¨¡å‹ (LLM) å’Œ AI åœ–åƒç”Ÿæˆå·¥å…· (å¦‚ ComfyUI) ç”¢ç”Ÿæ–‡å­—æè¿°ã€æ–‡ç« å…§å®¹å’Œå°æ‡‰çš„åœ–åƒã€‚ç”Ÿæˆçš„å†…å®¹æœƒç¶“é Discord é »é“çš„äººå·¥å¯©æ ¸ï¼Œæœ€çµ‚ç™¼å¸ƒåˆ° Instagram ç­‰ç¤¾ç¾¤å¹³å°ã€‚

## æ ¸å¿ƒåŠŸèƒ½

*   **å‹•æ…‹è§’è‰²è™•ç†**: æ”¯æ´åŸºæ–¼ä¸åŒã€Œè§’è‰²ã€çš„å…§å®¹ç”Ÿæˆï¼Œæ¯å€‹è§’è‰²å¯ä»¥æœ‰ç¨ç«‹çš„é…ç½® (ä¾‹å¦‚ï¼Œä½¿ç”¨çš„ AI workflowã€é¢¨æ ¼ã€é è¨­æ¨™ç±¤ç­‰)ã€‚
*   **æ™ºèƒ½æç¤ºè©ç”Ÿæˆ**:
    *   å¯æ ¹æ“šç”¨æˆ¶æä¾›çš„åŸºç¤æç¤ºè©é€²è¡Œæ“´å±•ã€‚
    *   è‹¥æœªæä¾›æç¤ºè©ï¼Œå¯åˆ©ç”¨ Ollama LLM (å¦‚ `llama3.2-vision`, `deepseek-r1:8b`) è‡ªå‹•ç”Ÿæˆã€‚
    *   æ”¯æ´å¾è³‡æ–™åº«ä¸­çš„æ–°èå…§å®¹æå–éˆæ„Ÿï¼Œç”Ÿæˆèˆ‡æ™‚äº‹ç›¸é—œçš„æç¤ºè©ã€‚
*   **å¤šæ¨¡æ…‹å…§å®¹ç”Ÿæˆ**:
    *   **æ–‡å­—å…§å®¹**: ç”Ÿæˆæè¿°ã€æ¨™é¡Œã€æ–‡ç« ç­‰ã€‚
    *   **åœ–åƒå…§å®¹**: æ•´åˆ ComfyUI ç­‰ AI åœ–åƒç”Ÿæˆå·¥å…·ï¼Œæ ¹æ“šæ–‡å­—æç¤ºç”Ÿæˆç¬¦åˆé¢¨æ ¼çš„åœ–åƒã€‚
*   **å…§å®¹ç­–ç•¥èˆ‡å®¢è£½åŒ–**:
    *   é€é `StrategyFactory` æ¨¡å¼ï¼Œå¯ä»¥å½ˆæ€§é¸æ“‡ä¸åŒçš„å…§å®¹ç”Ÿæˆç­–ç•¥ã€‚
    *   è§’è‰²é…ç½® (`CharacterConfig`) å…è¨±é«˜åº¦å®¢è£½åŒ–ï¼ŒåŒ…æ‹¬ ComfyUI workflow è·¯å¾‘ã€è¼¸å‡ºç›®éŒ„ã€ç›¸ä¼¼åº¦é–¾å€¼ç­‰ã€‚
*   **äººå·¥å¯©æ ¸æµç¨‹**: ç”Ÿæˆçš„åœ–æ–‡å…§å®¹æœƒç™¼é€åˆ°æŒ‡å®šçš„ Discord é »é“ï¼Œç”±äººå·¥é€²è¡Œå¯©æ ¸ã€ç·¨è¼¯å’Œé¸æ“‡æœ€çµ‚ç™¼å¸ƒçš„ç´ æã€‚
*   **ç¤¾ç¾¤åª’é«”æ•´åˆ**:
    *   ç›®å‰æ”¯æ´å°‡å¯©æ ¸å¾Œçš„å…§å®¹è‡ªå‹•ç™¼å¸ƒåˆ° Instagramã€‚
    *   é€é `SocialMediaMixin` è¨­è¨ˆï¼Œæ–¹ä¾¿æ“´å±•æ”¯æ´æ›´å¤šç¤¾ç¾¤å¹³å°ã€‚
*   **è³‡æ–™åº«æ•´åˆ**:
    *   å¾ MySQL è³‡æ–™åº«è®€å–è§’è‰²ç¾¤çµ„è³‡è¨Šã€æ–°èå…§å®¹ç­‰ï¼Œè¼”åŠ©å…§å®¹ç”Ÿæˆã€‚
*   **ä»»å‹™æ’ç¨‹**: ç³»çµ±è¨­è¨ˆç‚ºå¯é€éæ’ç¨‹å™¨ (å¦‚ `docker-compose.yml` ä¸­å®šç¾©çš„ `media-scheduler` æœå‹™çµåˆ `schedule` å¥—ä»¶) è‡ªå‹•åŸ·è¡Œå…§å®¹ç”Ÿæˆèˆ‡ç™¼å¸ƒä»»å‹™ã€‚
*   **å®¹å™¨åŒ–éƒ¨ç½²**: æä¾› `Dockerfile` å’Œ `docker-compose.yml`ï¼Œæ–¹ä¾¿ä½¿ç”¨ Docker é€²è¡Œéƒ¨ç½²å’Œç®¡ç†ã€‚

## æŠ€è¡“æ£§

*   **ç¨‹å¼èªè¨€**: Python 3
*   **æ ¸å¿ƒæ¡†æ¶èˆ‡å¥—ä»¶**:
    *   **å‘½ä»¤åˆ—ä»‹é¢**: `argparse`
    *   **ä»»å‹™æ’ç¨‹**: `schedule`
    *   **ç’°å¢ƒè®Šæ•¸ç®¡ç†**: `python-dotenv`
    *   **è³‡æ–™åº«äº’å‹•**: `SQLAlchemy`, `pymysql` (MySQL)
    *   **å½±åƒè™•ç†**: `Pillow`, `piexif`, `numpy`, `pandas`
    *   **ç¤¾ç¾¤å¹³å°æ•´åˆ**:
        *   Discord: `discord.py`
        *   Instagram: `instagrapi`
    *   **AI / LLM**:
        *   `ollama` (ç”¨æ–¼æœ¬åœ°éƒ¨ç½²å’Œèª¿ç”¨ LLMï¼Œå¦‚ Llama 3.2 Vision, Qwen 3)
        *   `google-generativeai`
        *   `websocket-client`, `urllib3` (å¯èƒ½ç”¨æ–¼èˆ‡ ComfyUI API äº’å‹•)
    *   **è¨­å®šæª”è™•ç†**: `PyYAML`
*   **AI æ¨¡å‹/æœå‹™**:
    *   Ollama (æœ¬åœ°å¤§å‹èªè¨€æ¨¡å‹)
    *   Google Generative AI
    *   ComfyUI (AI åœ–åƒç”Ÿæˆæµç¨‹å¼•æ“)
*   **è³‡æ–™åº«**: MySQL
*   **å®¹å™¨åŒ–**: Docker, Docker Compose
*   **æ—¥èªŒ**: `logging` æ¨¡çµ„ (é€é `utils.logger.setup_logger`)
*   **é–‹ç™¼å·¥å…·**: `rich` (ç¾åŒ–çµ‚ç«¯è¼¸å‡º)

## å°ˆæ¡ˆæ¶æ§‹èˆ‡æµç¨‹

```mermaid
graph TD
    A["ç³»çµ±å•Ÿå‹•"] --> B{"åƒæ•¸æª¢æŸ¥"}
    B -- æœ‰æç¤ºè© --> C["è§’è‰²è™•ç†å™¨"]
    B -- ç„¡æç¤ºè© --> D["ç”Ÿæˆæç¤ºè©"]
    D --> C
    C --> E["åŸ·è¡Œæµç¨‹"]

    subgraph core ["ğŸ”§ æ ¸å¿ƒæœå‹™"]
        E --> F["æç¤ºè©æœå‹™"]
        F --> |"åŸºç¤æ“´å±• â†’ æ–°èéˆæ„Ÿ â†’ LLMç”Ÿæˆ"| G["å…§å®¹ç”Ÿæˆ"]
        G --> |"ç”Ÿæˆæè¿° â†’ å‰µå»ºåœ–ç‰‡ â†’ åŒ¹é…åˆ†æ â†’ å®Œæˆæ–‡ç« "| H["Discordå¯©æ ¸"]
        H --> |"ç™¼é€å…§å®¹ â†’ ç­‰å¾…å¯©æ ¸ â†’ ç²å–çµæœ"| I["ç¤¾ç¾¤ç™¼å¸ƒ"]
        I --> |"æ ¼å¼è½‰æ› â†’ å¹³å°ç™¼å¸ƒ â†’ çµæœè™•ç†"| J["é€šçŸ¥æœå‹™"]
        J --> |"ç‹€æ…‹é€šçŸ¥ â†’ éŒ¯èª¤è™•ç† â†’ è³‡æºæ¸…ç†"| K["æµç¨‹å®Œæˆ"]
    end

    subgraph data ["ğŸ’¾ è³‡æ–™ç®¡ç†"]
        L["è§’è‰²è³‡æ–™"]
        M["æ–°èè³‡æ–™"]
        N["é…ç½®ç®¡ç†"]
    end

    subgraph external ["ğŸŒ å¤–éƒ¨æœå‹™"]
        O[(è³‡æ–™åº«)]
        P[LLMæ¨¡å‹]
        Q[åœ–åƒç”Ÿæˆ]
        R[Discord]
        S[Instagram]
    end
    
    classDef default fill:#f8f9fa,stroke:#495057,stroke-width:2px,color:#212529
    classDef service fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#1b5e20
    classDef data fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#e65100
    classDef external fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#0d47a1
    
    class F,G,H,I,J,E service
    class L,M,N,O data
    class P,Q,R,S external

    F -.-> P
    G -.-> P
    G -.-> Q
    H -.-> R
    I -.-> S
    L -.-> O
    M -.-> O
    N -.-> C
```

### æ–°æ¶æ§‹èªªæ˜

1. **æœå‹™å±¤ (Services)**
   - **PromptService**: è² è²¬ç”Ÿæˆæç¤ºè©
     - åŸºç¤æç¤ºè©æ“´å±•
     - æ–°èéˆæ„Ÿæå–
     - LLM ç”Ÿæˆæç¤ºè©
   - **ContentGenerationService**: è² è²¬å…§å®¹ç”Ÿæˆ
     - æ–‡å­—æè¿°ç”Ÿæˆ
     - åœ–ç‰‡ç”Ÿæˆï¼ˆComfyUIï¼‰
     - åœ–æ–‡åŒ¹é…åº¦åˆ†æ
     - æœ€çµ‚æ–‡ç« ç”Ÿæˆ
   - **ReviewService**: è² è²¬ Discord å¯©æ ¸æµç¨‹
     - å…§å®¹ç™¼é€
     - äººå·¥å¯©æ ¸ç­‰å¾…
     - çµæœè™•ç†
   - **PublishingService**: è² è²¬ç¤¾ç¾¤åª’é«”ç™¼å¸ƒ
     - åœ–ç‰‡è™•ç†
     - å¹³å°ç™¼å¸ƒ
     - çµæœè™•ç†
   - **NotificationService**: è² è²¬é€šçŸ¥
     - æˆåŠŸ/å¤±æ•—é€šçŸ¥
     - éŒ¯èª¤è™•ç†
     - è³‡æºæ¸…ç†
   - **OrchestrationService**: å·¥ä½œæµç¨‹å”èª¿
     - æœå‹™èª¿åº¦
     - éŒ¯èª¤è™•ç†
     - æµç¨‹æ§åˆ¶

2. **è³‡æ–™å­˜å–å±¤ (Repositories)**
   - **CharacterRepository**: è§’è‰²è³‡æ–™æ“ä½œ
     - è§’è‰²æŸ¥è©¢
     - ç¾¤çµ„ç®¡ç†
     - é…ç½®è®€å–
   - **NewsRepository**: æ–°èè³‡æ–™æ“ä½œ
     - æ–°èæª¢ç´¢
     - å…§å®¹æå–
     - è³‡æ–™æ›´æ–°
   - **ConfigLoader**: é…ç½®ç®¡ç†
     - YAML è§£æ
     - é…ç½®é©—è­‰
     - å‹•æ…‹è¼‰å…¥

3. **é…ç½®ç®¡ç†**
   - **ConfigurableCharacter**: å¯é…ç½®è§’è‰²åŸºé¡
     - é…ç½®ç¹¼æ‰¿
     - å‹•æ…‹å±¬æ€§
     - é©—è­‰æ©Ÿåˆ¶
   - **YAML é…ç½®çµæ§‹**:
     ```yaml
     character:
       name: your_character
       group_name: YourGroup
       
     generation:
       output_dir: /app/output_image
       workflow_path: /app/configs/workflow/your-workflow.json
       similarity_threshold: 0.7
       generation_type: text2img
       
       prompt_method_weights:
         arbitrary: 0.3
         news: 0.7
         
       image_system_prompt_weights:
         stable_diffusion_prompt: 0.6
         unbelievable_world_system_prompt: 0.4

     social_media:
       default_hashtags:
         - tag1
         - tag2
       platforms:
         instagram:
           config_folder_path: /app/configs/social_media/ig
           enabled: true

     additional_params:
       images_per_description: 3
       is_negative: false
     ```

### æµç¨‹èªªæ˜

1. **å•Ÿå‹•èˆ‡åƒæ•¸**
   - è…³æœ¬ (`run_media_interface.py`) å¯ç”±ç”¨æˆ¶ç›´æ¥åŸ·è¡Œæˆ–ç”±æ’ç¨‹å™¨è§¸ç™¼
   - æ¥æ”¶ `character` (è§’è‰²) å’Œå¯é¸çš„ `prompt` (æç¤ºè©) ä½œç‚ºè¼¸å…¥
   - æ”¯æ´ç’°å¢ƒè®Šæ•¸é…ç½®å’Œå‘½ä»¤åˆ—åƒæ•¸

2. **è§’è‰²è™•ç†å™¨åˆå§‹åŒ–**
   - æ ¹æ“š `character` åƒæ•¸å¯¦ä¾‹åŒ–ç›¸æ‡‰çš„è§’è‰²è™•ç†é¡åˆ¥
   - å¾ YAML é…ç½®æª”æ¡ˆè¼‰å…¥è§’è‰²ç‰¹å®šè¨­å®š
   - åˆå§‹åŒ–å¿…è¦çš„æœå‹™å’Œä¾è³´

3. **æç¤ºè©ç”Ÿæˆ (å¯é¸)**
   - å¦‚æœæœªæä¾› `prompt`ï¼Œ`PromptService` æœƒä½¿ç”¨ Ollama LLM ç”Ÿæˆ
   - æ”¯æ´å¤šç¨®ç”Ÿæˆç­–ç•¥ï¼š
     - åŸºç¤æç¤ºè©æ“´å±•
     - æ–°èéˆæ„Ÿæå–
     - ç´” LLM ç”Ÿæˆ
   - å¯é…ç½®ç”Ÿæˆç­–ç•¥çš„æ¬Šé‡

4. **å·¥ä½œæµç¨‹åŸ·è¡Œ**
   - **å‹•æ…‹è§’è‰²é¸æ“‡**
     - æª¢æŸ¥è§’è‰²æ˜¯å¦å±¬æ–¼ç¾¤çµ„
     - å¾è³‡æ–™åº«éš¨æ©Ÿé¸æ“‡ç¾¤çµ„å…§è§’è‰²
     - æ›´æ–°è§’è‰²é…ç½®
   - **é…ç½®åŠ è¼‰**
     - è¼‰å…¥è§’è‰²å®Œæ•´ç”Ÿæˆé…ç½®
     - é©—è­‰é…ç½®æœ‰æ•ˆæ€§
     - åˆå§‹åŒ–ç›¸é—œæœå‹™
   - **æœå‹™å”èª¿**
     - `PromptService`: ç”Ÿæˆæˆ–æ“´å±•æç¤ºè©
     - `ContentGenerationService`: ç”Ÿæˆå…§å®¹
     - `ReviewService`: è™•ç†å¯©æ ¸æµç¨‹
     - `PublishingService`: è™•ç†ç™¼å¸ƒ
     - `NotificationService`: ç™¼é€é€šçŸ¥

5. **äººå·¥å¯©æ ¸**
   - å…§å®¹ç™¼é€åˆ° Discord é »é“
   - ç­‰å¾…äººå·¥å¯©æ ¸å’Œç·¨è¼¯
   - è™•ç†å¯©æ ¸çµæœå’Œåé¥‹

6. **ç¤¾ç¾¤åª’é«”ç™¼å¸ƒ**
   - è™•ç†é¸å®šçš„åœ–ç‰‡ï¼ˆæ ¼å¼è½‰æ›ç­‰ï¼‰
   - ç™¼å¸ƒåˆ°é…ç½®çš„ç¤¾ç¾¤å¹³å°
   - è™•ç†ç™¼å¸ƒçµæœå’ŒéŒ¯èª¤

7. **é€šçŸ¥èˆ‡æ¸…ç†**
   - ç™¼é€æˆåŠŸ/å¤±æ•—é€šçŸ¥
   - æ¸…ç†è‡¨æ™‚æª”æ¡ˆå’Œè³‡æº
   - è¨˜éŒ„åŸ·è¡Œæ—¥èªŒ

## ç’°å¢ƒè¨­å®šèˆ‡åŸ·è¡Œ

### 1. ç’°å¢ƒè®Šæ•¸

å°ˆæ¡ˆä¾è³´ `media_overload.env` æª”æ¡ˆä¾†ç®¡ç†æ•æ„Ÿè³‡è¨Šå’Œç’°å¢ƒç‰¹å®šé…ç½®ã€‚è«‹è¤‡è£½æˆ–å»ºç«‹æ­¤æª”æ¡ˆï¼Œä¸¦å¡«å¯«å¿…è¦çš„æ†‘è­‰å’Œè·¯å¾‘ï¼Œä¾‹å¦‚ï¼š

```env
# è³‡æ–™åº« (MySQL)
mysql_host=your_mysql_host
mysql_port=3306
mysql_user=your_mysql_user
mysql_password=your_mysql_password
mysql_db_name=your_mysql_db_name

# Discord
discord_review_bot_token=your_discord_bot_token
discord_review_channel_id=your_discord_channel_id

# Ollama
OLLAMA_API_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3.2-vision

# ComfyUI
COMFYUI_API_URL=http://localhost:8188
```
é‚„éœ€è¦è¨­å®š `configs/social_media/discord/Discord.env` (é›–ç„¶ç›®å‰ä¸»è¦å¯©æ ¸æµç¨‹çš„ token åœ¨ä¸» envï¼Œä½†å¯èƒ½ç”¨æ–¼å…¶ä»– Discord åŠŸèƒ½)ã€‚
ä»¥åŠå„ç¤¾ç¾¤åª’é«”å¹³å°çš„è¨­å®šæª”ï¼Œä¾‹å¦‚ Instagram çš„è¨­å®šå¯èƒ½ä½æ–¼ `/app/configs/social_media/ig/` ä¸‹ï¼Œä¸¦ç”±å°æ‡‰çš„è§’è‰²ï¼ˆå¦‚ `wobbuffet.env`ï¼‰å¼•ç”¨ã€‚

### 2. ä¾è³´å®‰è£

```bash
pip install -r requirements.txt
```

### 3. ComfyUI / Ollama è¨­å®š

*   ç¢ºä¿æ‚¨çš„ ComfyUI æœå‹™æ­£åœ¨é‹è¡Œï¼Œä¸¦ä¸” API æ˜¯å¯è¨ªå•çš„ã€‚ç›¸é—œçš„ ComfyUI workflow JSON æª”æ¡ˆæ‡‰æ”¾ç½®åœ¨ `configs/workflow/` ç›®éŒ„ä¸‹ã€‚
*   ç¢ºä¿ Ollama æœå‹™æ­£åœ¨é‹è¡Œï¼Œä¸¦ä¸”å·²ä¸‹è¼‰æ‰€éœ€çš„æ¨¡å‹ (å¦‚ `llama3.2-vision`, `qwen3:8b`)ã€‚

### 4. è³‡æ–™åº«è¨­å®š

*   ç¢ºä¿ MySQL è³‡æ–™åº«å·²å»ºç«‹ï¼Œä¸¦ä¸”ç›¸é—œçš„è¡¨ (å¦‚ `anime.anime_roles`, `news_ch.news`) å·²å­˜åœ¨ä¸”åŒ…å«æ‰€éœ€è³‡æ–™ã€‚

### 5. åŸ·è¡Œ

å¯ä»¥ç›´æ¥åŸ·è¡Œä¸»è…³æœ¬ï¼š

```bash
python run_media_interface.py --character <CharacterName> --prompt "Your creative prompt here"
```
ä¾‹å¦‚:
```bash
python run_media_interface.py --character Wobbuffet --prompt "A funny scene with Wobbuffet trying to bake a cake"
```

å¦‚æœ `--prompt` æœªæä¾›ï¼Œç³»çµ±å°‡å˜—è©¦è‡ªå‹•ç”Ÿæˆã€‚

### 6. ä½¿ç”¨ Docker é‹è¡Œ (æ¨è–¦)

å°ˆæ¡ˆæä¾›äº† `Dockerfile` å’Œ `docker-compose.yml`ï¼Œå¯ä»¥ä½¿ç”¨ Docker Compose å•Ÿå‹• `media-scheduler` æœå‹™ï¼š

```bash
docker-compose up --build -d
```
æ­¤æœå‹™å¯èƒ½æœƒæ ¹æ“šå…§å»ºçš„æ’ç¨‹é‚è¼¯ (ä¾‹å¦‚ä½¿ç”¨ `scheduler` è³‡æ–™å¤¾ä¸‹çš„è…³æœ¬å’Œ `schedule` å¥—ä»¶) å®šæœŸè§¸ç™¼å…§å®¹ç”Ÿæˆæµç¨‹ã€‚

## ä¸»è¦æ¨¡çµ„èªªæ˜

*   `run_media_interface.py`: å°ˆæ¡ˆçš„å‘½ä»¤åˆ—å…¥å£é»ï¼Œè§£æåƒæ•¸ä¸¦å•Ÿå‹•å…§å®¹è™•ç†æµç¨‹ã€‚
*   `lib/services/`: åŒ…å«å„ç¨®æœå‹™å¯¦ç¾ï¼Œè² è²¬æ•´å€‹å·¥ä½œæµç¨‹çš„å”èª¿ï¼ŒåŒ…æ‹¬æç¤ºè©ç”Ÿæˆã€å…§å®¹ç”Ÿæˆã€Discord å¯©æ ¸å’Œç¤¾ç¾¤åª’é«”ç™¼å¸ƒã€‚
*   `lib/media_auto/strategies/`: (æ¨æ¸¬) åŒ…å«ä¸åŒçš„å…§å®¹ç”Ÿæˆç­–ç•¥ï¼Œä¾‹å¦‚èˆ‡ ComfyUI äº’å‹•çš„ç­–ç•¥ (`StrategyFactory` æœƒå¾é€™è£¡è¼‰å…¥)ã€‚
*   `lib/content_generation/`: (æ¨æ¸¬) åŒ…å«èˆ‡ LLM äº’å‹•ç”Ÿæˆæ–‡å­—å…§å®¹ (å¦‚æç¤ºè©ã€æè¿°ã€æ–‡ç« ) çš„é‚è¼¯ï¼Œä¾‹å¦‚ `VisionManagerBuilder`ã€‚
*   `lib/social_media/`: åŒ…å«ç¤¾ç¾¤åª’é«”ç™¼å¸ƒçš„é€šç”¨é‚è¼¯ (`SocialMediaMixin`, `MediaPost`) å’Œç‰¹å®šå¹³å°çš„å¯¦ç¾ (å¦‚ `InstagramPlatform`)ã€‚
*   `lib/discord/`: è™•ç†èˆ‡ Discord API çš„äº’å‹•ï¼Œä¸»è¦æ˜¯å…§å®¹å¯©æ ¸æµç¨‹ã€‚
*   `lib/database/`: æä¾›è³‡æ–™åº«é€£æ¥æ± å’Œæ“ä½œçš„å°è£ã€‚
*   `utils/`: åŒ…å«è¼”åŠ©å·¥å…·ï¼Œå¦‚æ—¥èªŒè¨­å®š (`logger.py`)ã€åœ–åƒè™•ç† (`image.py`)ã€‚
*   `configs/`: å­˜æ”¾å°ˆæ¡ˆçš„å„ç¨®è¨­å®šæª”ã€‚
    *   `workflow/`: å­˜æ”¾ ComfyUI çš„ workflow JSON æª”æ¡ˆã€‚
    *   `social_media/`: å­˜æ”¾å„ç¤¾ç¾¤åª’é«”å¹³å°åŠå¸³è™Ÿçš„è¨­å®šæª”ã€‚
*   `scheduler/`: (æ¨æ¸¬) åŒ…å«ç”¨æ–¼æ’ç¨‹ä»»å‹™çš„è…³æœ¬ã€‚
*   `output_image/`: ç”Ÿæˆçš„åœ–ç‰‡é è¨­æœƒè¼¸å‡ºåˆ°æ­¤ç›®éŒ„ä¸‹ä»¥è§’è‰²åå‘½åçš„å­è³‡æ–™å¤¾ä¸­ã€‚
*   `logs/`: å­˜æ”¾æ‡‰ç”¨ç¨‹å¼æ—¥èªŒã€‚

## æ³¨æ„äº‹é …

*   å°ˆæ¡ˆä¸­çš„è¨±å¤šè·¯å¾‘ (å¦‚ `workflow_path`, `output_dir`) åœ¨ Docker ç’°å¢ƒä¸‹æ˜¯ `/app/...`ï¼Œåœ¨æœ¬åœ°é‹è¡Œæ™‚è«‹ç¢ºä¿è·¯å¾‘å°æ‡‰æ­£ç¢ºæˆ–é€²è¡Œç›¸æ‡‰èª¿æ•´ã€‚
*   ç¤¾ç¾¤åª’é«”å¹³å°çš„ç™»å…¥æ†‘è­‰å’Œ API token éœ€è¦å®‰å…¨ç®¡ç†ï¼Œä¸¦æ­£ç¢ºé…ç½®åœ¨ `.env` æª”æ¡ˆæˆ–ç›¸æ‡‰çš„è¨­å®šæª”ä¸­ã€‚
